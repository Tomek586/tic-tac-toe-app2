(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{4995:(e,t,a)=>{Promise.resolve().then(a.bind(a,9361))},9783:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(5155);let r=()=>(0,s.jsx)("footer",{className:"bg-gray-800 text-white py-0.5 w-full absolute bottom-0 left-0",children:(0,s.jsxs)("div",{className:"container mx-auto text-center",children:[(0,s.jsx)("p",{children:"Tic Tac Toe Game"}),(0,s.jsx)("p",{children:"Stworzone przez Tomasz Dziedzic"})]})})},1788:(e,t,a)=>{"use strict";a.d(t,{A:()=>u,O:()=>o});var s=a(5155),r=a(2115),l=a(399),i=a(7982);let d=(0,r.createContext)(),o=e=>{let{children:t}=e,[a,o]=(0,r.useState)(null),[u,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=(0,l.hg)(i.j2,e=>{o(e),c(!1)});return()=>e()},[]);let n=async(e,t)=>{try{let a=(await (0,l.eJ)(i.j2,e,t)).user;return await (0,l.gA)(a),a}catch(e){if("auth/email-already-in-use"===e.code)throw Error("Ten e-mail jest już zarejestrowany.");throw console.error("Registration failed",e),e}},m=async()=>{try{await (0,l.CI)(i.j2),o(null)}catch(e){console.error("Logout failed",e)}};return((0,r.useEffect)(()=>{a&&!a.emailVerified&&((0,l.CI)(i.j2),alert("Proszę zweryfikować sw\xf3j e-mail."),window.location.href="/user/verify")},[a]),u)?(0,s.jsx)("p",{children:"Ładowanie..."}):(0,s.jsx)(d.Provider,{value:{user:a,login:e=>{o(e)},logout:m,register:n,isEmailVerified:()=>!!a&&a.emailVerified,getUid:()=>a?a.uid:null},children:t})},u=()=>{let e=(0,r.useContext)(d);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},7982:(e,t,a)=>{"use strict";a.d(t,{db:()=>o,j2:()=>d});var s=a(9904),r=a(399),l=a(7058);let i=(0,s.Wp)({apiKey:"AIzaSyBotJKG9EWGsrgiejAoM1NL0Bvvd33I-W8",authDomain:"tic-tac-toe-app-79c26.firebaseapp.com",projectId:"tic-tac-toe-app-79c26",storageBucket:"tic-tac-toe-app-79c26.firebasestorage.app",messagingSenderId:"6533018953",appId:"1:6533018953:web:6fa7d5fb91184ca4a2d698",measurementId:"G-TX7YLBF3YB"}),d=(0,r.xI)(i),o=(0,l.aU)(i)},9361:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(5155),r=a(1788),l=a(399),i=a(2115),d=a(7982),o=a(7058),u=a(9783),c=a(6046);function n(){let{user:e}=(0,r.A)(),t=(0,c.useRouter)(),[a,n]=(0,i.useState)((null==e?void 0:e.displayName)||""),[m,p]=(0,i.useState)((null==e?void 0:e.photoURL)||""),[x,h]=(0,i.useState)(""),[f,b]=(0,i.useState)(""),[w,j]=(0,i.useState)(""),[g,v]=(0,i.useState)(0),[y,N]=(0,i.useState)(0),[k,z]=(0,i.useState)(0),[S,C]=(0,i.useState)(0),[E,A]=(0,i.useState)("");(0,i.useEffect)(()=>{e||t.push("/public/user/signin")},[e,t]),(0,i.useEffect)(()=>{(async()=>{if(e)try{let r=await (0,o.x7)((0,o.H9)(d.db,"users",e.uid));if(r.exists()){var t,a,s;let e=r.data();n(e.displayName||""),p(e.photoURL||""),h((null===(t=e.address)||void 0===t?void 0:t.street)||""),b((null===(a=e.address)||void 0===a?void 0:a.city)||""),j((null===(s=e.address)||void 0===s?void 0:s.zipCode)||"")}let l=await (0,o.x7)((0,o.H9)(d.db,"games",e.uid));if(l.exists()){let e=l.data();v(e.totalGames||0),N(e.wins||0),z(e.losses||0),C(e.draws||0)}}catch(e){console.error("Błąd podczas pobierania danych:",e)}})()},[e]);let I=async t=>{t.preventDefault();try{await (0,l.r7)(e,{displayName:a,photoURL:m}),await (0,o.BN)((0,o.H9)(d.db,"users",e.uid),{displayName:a,photoURL:m,address:{street:x,city:f,zipCode:w}}),await (0,o.BN)((0,o.H9)(d.db,"games",e.uid),{totalGames:g,wins:y,losses:k,draws:S}),console.log("Profile and game data updated in Firestore.")}catch(e){A(e.message)}};return e?(0,s.jsxs)("div",{className:"max-w-3xl mx-auto mt-8 p-6 bg-white shadow-md rounded-lg",children:[(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsx)("img",{src:m||"https://www.example.com/default-profile-pic.png",alt:"Profile Picture",className:"w-24 h-24 rounded-full object-cover"})}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-center text-gray-700 mb-4",children:"Edytuj profil"}),(0,s.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700",children:"Nazwa użytkownika"}),(0,s.jsx)("input",{type:"text",id:"displayName",value:a,onChange:e=>n(e.target.value),className:"mt-2 p-3 block w-full border rounded-md"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"photoURL",className:"block text-sm font-medium text-gray-700",children:"Adres zdjęcia profilowego"}),(0,s.jsx)("input",{type:"url",id:"photoURL",value:m,onChange:e=>p(e.target.value),className:"mt-2 p-3 block w-full border rounded-md"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700",children:"Ulica"}),(0,s.jsx)("input",{type:"text",id:"street",value:x,onChange:e=>h(e.target.value),className:"mt-2 p-3 block w-full border rounded-md"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"Miasto"}),(0,s.jsx)("input",{type:"text",id:"city",value:f,onChange:e=>b(e.target.value),className:"mt-2 p-3 block w-full border rounded-md"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700",children:"Kod pocztowy"}),(0,s.jsx)("input",{type:"text",id:"zipCode",value:w,onChange:e=>j(e.target.value),className:"mt-2 p-3 block w-full border rounded-md"})]}),(0,s.jsx)("button",{type:"submit",className:"w-full py-3 px-6 bg-indigo-600 text-white rounded-md shadow hover:bg-indigo-700",children:"Zaktualizuj dane"}),E&&(0,s.jsx)("p",{className:"text-red-600 text-center",children:E})]}),(0,s.jsx)(u.A,{})]}):null}},6046:(e,t,a)=>{"use strict";var s=a(6658);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[992,882,459,441,517,358],()=>t(4995)),_N_E=e.O()}]);