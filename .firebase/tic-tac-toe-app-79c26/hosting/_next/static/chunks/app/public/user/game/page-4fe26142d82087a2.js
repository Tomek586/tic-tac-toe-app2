(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[923],{9897:(e,a,r)=>{Promise.resolve().then(r.bind(r,1606))},9783:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});var l=r(5155);let t=()=>(0,l.jsx)("footer",{className:"bg-gray-800 text-white py-0.5 w-full absolute bottom-0 left-0",children:(0,l.jsxs)("div",{className:"container mx-auto text-center",children:[(0,l.jsx)("p",{children:"Tic Tac Toe Game"}),(0,l.jsx)("p",{children:"Stworzone przez Tomasz Dziedzic"})]})})},1788:(e,a,r)=>{"use strict";r.d(a,{A:()=>c,O:()=>n});var l=r(5155),t=r(2115),o=r(399),s=r(7982);let i=(0,t.createContext)(),n=e=>{let{children:a}=e,[r,n]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let e=(0,o.hg)(s.j2,e=>{n(e),u(!1)});return()=>e()},[]);let d=async(e,a)=>{try{let r=(await (0,o.eJ)(s.j2,e,a)).user;return await (0,o.gA)(r),r}catch(e){if("auth/email-already-in-use"===e.code)throw Error("Ten e-mail jest już zarejestrowany.");throw console.error("Registration failed",e),e}},m=async()=>{try{await (0,o.CI)(s.j2),n(null)}catch(e){console.error("Logout failed",e)}};return((0,t.useEffect)(()=>{r&&!r.emailVerified&&((0,o.CI)(s.j2),alert("Proszę zweryfikować sw\xf3j e-mail."),window.location.href="/user/verify")},[r]),c)?(0,l.jsx)("p",{children:"Ładowanie..."}):(0,l.jsx)(i.Provider,{value:{user:r,login:e=>{n(e)},logout:m,register:d,isEmailVerified:()=>!!r&&r.emailVerified,getUid:()=>r?r.uid:null},children:a})},c=()=>{let e=(0,t.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},7982:(e,a,r)=>{"use strict";r.d(a,{db:()=>n,j2:()=>i});var l=r(9904),t=r(399),o=r(7058);let s=(0,l.Wp)({apiKey:"AIzaSyBotJKG9EWGsrgiejAoM1NL0Bvvd33I-W8",authDomain:"tic-tac-toe-app-79c26.firebaseapp.com",projectId:"tic-tac-toe-app-79c26",storageBucket:"tic-tac-toe-app-79c26.firebasestorage.app",messagingSenderId:"6533018953",appId:"1:6533018953:web:6fa7d5fb91184ca4a2d698",measurementId:"G-TX7YLBF3YB"}),i=(0,t.xI)(s),n=(0,o.aU)(s)},1606:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>u});var l=r(5155),t=r(2115);r(6825);let o=e=>{let{config:a,onConfigChange:r}=e;return(0,l.jsxs)("div",{className:"board-config",children:[(0,l.jsx)("h3",{children:"Konfiguracja planszy"}),(0,l.jsxs)("label",{children:["Rozmiar planszy:",(0,l.jsx)("input",{type:"number",name:"boardSize",value:a.boardSize,onChange:r,min:"3",max:"10",className:"mt-2 p-2 block border border-gray-300 rounded-md shadow-sm"})]}),(0,l.jsxs)("label",{children:["Kolor tła:",(0,l.jsx)("input",{type:"color",name:"backgroundColor",value:a.backgroundColor,onChange:r})]}),(0,l.jsxs)("label",{children:["Kolor symboli:",(0,l.jsx)("input",{type:"color",name:"symbolColor",value:a.symbolColor,onChange:r})]}),(0,l.jsxs)("label",{children:["Kolor obramowania:",(0,l.jsx)("input",{type:"color",name:"borderColor",value:a.borderColor,onChange:r})]}),(0,l.jsxs)("label",{children:["Rozmiar pola (px):",(0,l.jsx)("input",{type:"number",name:"cellSize",value:a.cellSize,onChange:r,min:"30",max:"100"})]}),(0,l.jsxs)("label",{children:["Rozmiar symbolu (px):",(0,l.jsx)("input",{type:"number",name:"symbolSize",value:a.symbolSize,onChange:r,min:"10",max:"50"})]})]})};r(7355);var s=r(1788),i=r(7982),n=r(7058),c=r(9783);let u=()=>{let{user:e}=(0,s.A)(),[a,r]=(0,t.useState)(3),[u,d]=(0,t.useState)(Array(a).fill(null).map(()=>Array(a).fill(null))),[m,b]=(0,t.useState)(null),[h,f]=(0,t.useState)(null),[p,g]=(0,t.useState)(0),[y,x]=(0,t.useState)(0),[j,z]=(0,t.useState)(a*a),[S,v]=(0,t.useState)(null),[w,C]=(0,t.useState)({backgroundColor:"#ffffff",symbolColor:"#000000",borderColor:"#000000",cellSize:50,symbolSize:24,boardSize:3});(0,t.useEffect)(()=>{w.boardSize!==a&&(r(w.boardSize),d(Array(w.boardSize).fill(null).map(()=>Array(w.boardSize).fill(null))),z(w.boardSize*w.boardSize),f(null),g(0),x(0))},[w.boardSize]),(0,t.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("ticTacToeState"));e&&(d(e.board),b(e.currentPlayer),f(e.winner),g(e.movesX),x(e.movesO),z(e.freeCells))},[]),(0,t.useEffect)(()=>{localStorage.setItem("ticTacToeState",JSON.stringify({board:u,currentPlayer:m,winner:h,movesX:p,movesO:y,freeCells:j}))},[u,m,h,p,y,j]);let k=e=>{let a=e.length;for(let r=0;r<a;r++)if(e[r].every(e=>e===m)||e.every(e=>e[r]===m))return!0;return!!(e.every((e,a)=>e[a]===m)||e.every((e,r)=>e[a-r-1]===m))},N=e=>{let a=[],r=e.length;for(let l=0;l<r;l++)for(let t=0;t<r;t++)e[l][t]||a.push([l,t]);if(0===a.length)return null;let l=Math.floor(Math.random()*a.length);return a[l]},A=(a,r)=>{if(u[a][r]||h)return;let l=u.map((e,l)=>e.map((e,t)=>l===a&&t===r?m:e));z(j-1),"X"===m?g(p+1):x(y+1),k(l)?(f(m),e&&G(e.uid,m)):l.flat().every(e=>e)?(f("Remis"),e&&G(e.uid,"Remis")):b("X"===m?"O":"X"),d(l)},E=()=>{let[e,a]=N(u);A(e,a)},G=async(a,r)=>{if(e)try{let e=(0,n.H9)(i.db,"users",a),l=(await (0,n.x7)(e)).data();l&&l.games?"Remis"===r?await (0,n.mZ)(e,{"games.Draws":(0,n.GV)(1),"games.TotalGames":(0,n.GV)(1)}):await (0,n.mZ)(e,{"games.Wins":(0,n.GV)(r===S?1:0),"games.Losses":(0,n.GV)(r!==S?1:0),"games.TotalGames":(0,n.GV)(1)}):await (0,n.BN)(e,{games:{Wins:r===S?1:0,Losses:r!==S?1:0,Draws:"Remis"===r?1:0,TotalGames:1}},{merge:!0})}catch(e){console.error("Błąd podczas aktualizacji statystyk:",e)}},T=e=>{v(e),b(e)};return(0,t.useEffect)(()=>{"O"!==m||h||E()},[m,h]),(0,t.useEffect)(()=>{console.log("Status użytkownika:",e)},[e]),(0,l.jsxs)("div",{children:[null===m?(0,l.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,l.jsx)("p",{children:(0,l.jsx)("button",{onClick:()=>T("X"),className:"bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Zaczyna X - Ja"})}),(0,l.jsx)("button",{onClick:()=>T("O"),className:"bg-green-500 text-white px-6 py-3 rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400",children:"Zaczyna O - Komputer"})]}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"tic-tac-toe",children:[u.map((e,a)=>(0,l.jsx)("div",{className:"row",children:e.map((e,r)=>(0,l.jsx)("div",{className:"cell",onClick:()=>A(a,r),style:{backgroundColor:w.backgroundColor,color:w.symbolColor,borderColor:w.borderColor,width:"".concat(w.cellSize,"px"),height:"".concat(w.cellSize,"px"),fontSize:"".concat(w.symbolSize,"px")},children:e},r))},a)),(0,l.jsx)("div",{className:"status",children:h?"Remis"===h?"Remis! Gra zakończona.":"Wygrywa: ".concat(h):"Następny gracz: ".concat(m)}),(0,l.jsxs)("div",{className:"game-info",children:[(0,l.jsxs)("p",{children:["Ruchy gracza 1 (X):"," ",p]}),(0,l.jsxs)("p",{children:["Ruchy gracza 2 (O):"," ",y]}),(0,l.jsxs)("p",{children:["Wolne pola:"," ",j]})]}),(0,l.jsx)("button",{className:"reset-btn",onClick:()=>{d(Array(a).fill(null).map(()=>Array(a).fill(null))),b(S),f(null),g(0),x(0),z(a*a)},children:"Zresetuj grę"})]}),(0,l.jsx)(o,{config:w,onConfigChange:e=>{let{name:a,value:r}=e.target,l="boardSize"===a||"cellSize"===a||"symbolSize"===a?parseInt(r):r;"boardSize"===a&&(l<3||l>10)||C(e=>({...e,[a]:l}))}})]}),(0,l.jsx)(c.A,{})]})}},6825:()=>{},7355:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[657,992,882,459,441,517,358],()=>a(9897)),_N_E=e.O()}]);